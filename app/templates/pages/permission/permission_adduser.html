{% extends 'base/container.html' %}
{% load static %}
{% block title %}Product {% endblock %}

{% block style %}


{% endblock %}
{% block body_content %} 
 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<div class="wrapper">
        <div class="wrapper-title">
    <div class="wrapper-content">({{group.name}})- User-Update</div>
    <div class="wrapper-actions">
        <button class="btn btn-secondary" style="display: inline-flex;gap:2px;" onclick="history.back()">  <i class="material-icons">arrow_circle_left</i>Back</button>
    </div>
   </div> 
 
<div class="card">
<ul class="nav nav-tabs" id="userTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="add-tab" data-bs-toggle="tab" data-bs-target="#add" type="button" role="tab">Add New Users</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="remove-tab" data-bs-toggle="tab" data-bs-target="#remove" type="button" role="tab">User</button>
    </li>
</ul>
<form method="post">
    {% csrf_token %}
    <div class="tab-content mt-3" id="userTabContent">
        <!-- Add Users Tab -->
        <div class="tab-pane fade show active" id="add" role="tabpanel">
                <table class="display table table-bordered" id="User-info-list">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Users</th>
                            <th>Status</th>

                        </tr>
                    </thead>
                    <tbody>
                        {%for user in users_without_group %}
                        <tr class="gradeX">
                            <td > <input type="checkbox" name="add_user_ids" value="{{ user.id }}"></td>
                            <td >{{ user.get_full_name }}</td>
                            <td>
                                 {%if user.status %}
                                <span class="badge badge-info">
                                    Active
                                </span>
                                {%else%}
                                <span class="badge badge-warning">
                                    Active
                                </span>
                                {%endif%}
                            </td>

                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
        </div>
        <!-- Remove Users Tab -->
        <div class="tab-pane fade" id="remove" role="tabpanel">
             <table class="display table table-bordered" id="User-info-list">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Users</th>
                            <th>Status</th>

                        </tr>
                    </thead>
                    <tbody>
                        {%for user in users_in_group %}
                        <tr class="gradeX">
                            <td > <input type="checkbox" name="remove_user_ids" value="{{ user.id }}"></td>
                            <td >{{ user.get_full_name }}</td>
                            <td >
                                {%if user.status %}
                                <span class="badge badge-info">
                                    Active
                                </span>
                                {%else%}
                                <span class="badge badge-warning">
                                    Active
                                </span>
                                {%endif%}
                                </td>

                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
        </div>
    </div>
   <button type="button" onclick="confirmUserUpdate()" class="btn btn-primary mt-3">Update</button>

</form>

</div>
</div>
{% endblock %}
{% block js %}
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link rel="stylesheet" type="text/css" href="bower_components/sweetalert2/dist/sweetalert2.min.css">
<script>
function confirmUserUpdate() {
    Swal.fire({
        title: 'Are you sure?',
        text: "Do you want to update group users?",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Yes, update',
        cancelButtonText: 'Cancel'
    }).then((result) => {
        if (result.isConfirmed) {
            document.querySelector('form').submit();
        } else {
            Swal.fire('Cancelled', 'No changes were saved.', 'info');
        }
    });
}
</script>
 

{% endblock %}