
{% extends 'base/container.html' %}
{% load static %}
{% block title %}Dashboard{% endblock %}

{% block style %}
 <style>
    .custom-card {
        background: linear-gradient(82deg, #5a1c44, #ff55be);
        border-radius: 15px;
        color: white;
        display: flex;
        flex-direction: row;
        align-items: center;
        padding: 24px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s ease;
    }
  .custom-card.users {
      background: linear-gradient(61deg, #181544, #8b9ff0);
  }
  /* Subcategories */
  .custom-card.card-subcategory {
      background: linear-gradient(61deg, #8f7f08, #f8d020);
  }

  /* Products */
  .custom-card.card-product {
      background: linear-gradient(61deg, #08691a, #78fc3b);
  }

  /* Brand-themed card (Black & Red) */
  .custom-card.brand {
      background: linear-gradient(61deg, #1a1a1a, #ff1e1e);
  }

/* Optional: dark theme with a hint of red */
.custom-card.brand-dark {
    background: linear-gradient(61deg, #2b2b2b, #b30000);
}

  .custom-card:hover {
    transform: translateY(-5px);
  }

  .symbol {
    font-size: 30px;
    background: rgba(255, 255, 255, 0.2);
    padding: 15px;
    border-radius: 50%;
    margin-right: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .value h1 {
    margin: 0;
    font-size: 26px;
    font-weight: bold;
  }

  .value p {
    margin: 0;
    font-size: 14px;
    opacity: 0.9;
  }
  .dash-card-header {
    font-size: 22px;
    font-weight: 800;
    /* color: #767d8c; */
    /* background-color: green; */
}
 </style>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/5.3.3/apexcharts-legend.min.css" integrity="sha512-c+q4lJ9pAoiVNqS+1EXJ6yo6RnbGN3stU46/3OuQ8S468g6iMdj62TQU8H9UZ3I2xSy7VrY6jRDtFVtPeKAX8w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{% endblock %}
{% block body_content %} 
 <section class="wrapper">
  <div class="dash-container-pages">
     
    
      <!--state overview start-->
   
      
      <div class="row dash-container">
        
          <div class="col-lg-3 col-sm-6">
              <section class="card custom-card">
                  <div class="symbol">
                    <i class="material-icons">category</i>  
                  </div>
                  <div class="value">
                  <h1 class="count">{{categories_total}}</h1>
                  <p>Category</p>
                  </div>
              </section>
          </div>
          <div class="col-lg-3 col-sm-6">
              <section class="card custom-card card-subcategory">
                  <div class="symbol">
                  <i class="material-icons">interests</i>
                  </div>
                  <div class="value">
                  <h1 class="count">{{subcategories_total}}</h1>
                  <p>Sub-Category</p>
                  </div>
              </section>
          </div>
          <div class="col-lg-3 col-sm-6">
              <section class="card custom-card card-product">
                  <div class="symbol">
                    <i class="material-icons">add_shopping_cart</i>
                  </div>
                  <div class="value">
                  <h1 class="count">{{Products_total}}</h1>
                  <p>Products</p>
                  </div>
              </section>
          </div>
          <div class="col-lg-3 col-sm-6">
              <section class="card custom-card users">
                  <div class="symbol">
                  <i class="material-icons">groups_3</i> 
                  
                  </div>
                  <div class="value">
                  <h1 class="count">{{customers_total}}</h1>
                  <p>Customers</p>
                  </div>
              </section>
          </div>
      </div>
    
      <div class="row ">
          <div class="col-6">
            <div class="card">
              <div class="card-header dash-card-header">Quotation</div>
              <div id="chart" style="width:100%; height:400px;"></div>
            </div>
          </div>
          <div class="col-6">
            <div class="card">
               <div class="card-header dash-card-header">Invoice</div>
              <div id="invoices-chart" style="width:100%; height:400px;"></div>
              
            </div>
          </div>
      </div>
  </div>
       
</section>
{% endblock %}
{% block js %}
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/5.3.3/apexcharts.min.js" integrity="sha512-Jv/XSvfIZSOfqdoMuXtMsZ2UJnXSLBT2jIFT9gcL4BtwR0y99tNm6DNMiE5ZJAMdivEHP83/JANyKQEXCVNmeQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
 

<script>
  // Get data from Django template variable
  let datas = {{ qus|safe }};

  var options = {
    series: [
      { name: 'Quotations', data: [datas.list_quotations] },
      { name: 'Invoice', data: [datas.quotations_invoice] },
      { name: 'Reject', data: [datas.quotations_reject] },
      { name: 'Pending', data: [datas.quotations_pending] }
    ],
    chart: {
      type: 'bar',
      height: 350,
       width: "100%", 
      background: '#f4f0ee13', // warm brown background
      toolbar: { show: true,
        tools: {
        download: false // This line hides the download button
      } },
      
    },
    plotOptions: {
      bar: {
        horizontal: false,
        columnWidth: '30%',
        borderRadius: 1,
        borderRadiusApplication: 'end'
      }
    },
    colors: [
      '#05223e', // Navy blue for Quotations
      '#006400', // Dark green for Invoice
      '#ff0000', // Red for Reject
      '#FFA500',  // Orange for Pending
    ],
    dataLabels: {
      enabled: true,
      formatter: function (val) {
        return val + "";
      },
      style: {
        fontSize: '12px',
        fontWeight: 'bold',
        colors: ['#FFFFFF'] // White text
      }
    },
    stroke: {
      show: true,
      width: 2,
      colors: ['transparent']
    },
    xaxis: {
      categories: [' '], // Single category for all series
    },
    yaxis: {
      
    },
    fill: { opacity: 1 },
    tooltip: {
      y: {
        formatter: function (val) {
          return val ;
        }
      }
    }
  };

  var chart = new ApexCharts(document.querySelector("#chart"), options);
  chart.render();
  
let datas_invoice = {{ invoice|safe }};
var options = {
  
  series: [
  Number(datas_invoice.list_invoice || 0),
  Number(datas_invoice.pending_invoice || 0),
  Number(datas_invoice.payment_pending_invoice || 0),
  Number(datas_invoice.paid_invoices || 0)  // âœ… corrected spelling
],
  chart: {
    type: 'donut',
    height: 350,
    width: "100%",
    background: '#f4f0ee13',
    toolbar: {
      show: true,
      tools: { download: false }
    }
  },
  labels: ['Invoice', 'Pending', 'Payment Pending', 'Paid'],
  colors: ['#05223e', '#ff0000', '#FFA500', '#006400'],
  dataLabels: {
    enabled: true,
    formatter: function (val, opts) {
      return opts.w.config.series[opts.seriesIndex];
    },
    style: {
      fontSize: '14px',
      fontWeight: 'bold',
      colors: ['#FFFFFF']
    }
  },
  legend: {
    position: 'bottom',
    labels: { colors: '#000' }
  },
  tooltip: {
    y: { formatter: function (val) { return val; } }
  }
};

var chart = new ApexCharts(document.querySelector("#invoices-chart"), options);
chart.render();
</script>


{% comment %} invoice {% endcomment %}
{% endblock %}